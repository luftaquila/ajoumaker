<html style='-ms-user-select: none; -moz-user-select: -moz-none; -webkit-user-select: none; -khtml-user-select: none; user-select:none;'>
  <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119383265-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-119383265-2');
    </script>
    <title>아주대학교 메이커스페이스</title>
    <meta charset="utf-8">
    <meta property="og:title" content="아주대학교 메이커스페이스"/>
    <meta property="og:url" content="https://luftaquila.github.io/ajouMaker/"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html">
  	<link rel="stylesheet" href="/ajoumaker/resources/alertify.core.css" />
  	<link rel="stylesheet" href="/ajoumaker/resources/alertify.default.css" id="toggleCSS" />
  </head>
  <body>
    <style>
      input[type="number"]::-webkit-outer-spin-button,
      input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      .ext {
        background: url(/ajoumeyoumeow/Icons/Resized/external.png) no-repeat left center;
        padding-left: 14px;
      }
    </style>
    <table style="table-layout:fixed">
      <tr>
        <td style="vertical-align:top">
          <form id="DATA" style="height:600; width:870; margin:25 0 0 25">
            아주대학교 메이커스페이스 장비 관리 시스템&nbsp;
              <a id='version' href="/ajoumaker/about.html?v2.3.6" style="color:#0366d6; font-size:0.75rem"></a><br><span style="line-height:25%"><br></span>
            <div id='notice' style="font-size:1rem;">
              <span style="font-weight:bold">1시간 미만의 작업물은 1시간 사용으로 간주합니다.</span><br>
              <span style="font-weight:bold">파일은 STL 파일과 gcode 데이터를 압축해서 .zip 확장자로 업로드 바랍니다.</span><br><span style="line-height:50%"><br></span>
              <span style="color:red; font-weight:bold">작업물이 출력이 실패할 경우 사용 요금의 50%가 마일리지로 제공됩니다.</span><br>
              <span style="color:red; font-weight:bold">파일 업로드가 끝나기 전에 USB를 제거하면 업로드가 정상적으로 이루어지지 않습니다.</span>
            </div><span style="line-height:70%"><br></span>
            <div style='width:10; float:left'>&nbsp;</div>
            <div id='basicInfo' style='float:left'>
              <input placeholder="이름 입력" id="name" type="text" style='width:150' autofocus required/><br><span style="line-height:25%"><br></span>
              <input placeholder="소속 / 학과 입력" id="belonging" type="text" style='width:150' required/><br><span style="line-height:25%"><br></span>
              <input placeholder="연락처 입력" id="contact" type="tel" maxlength="13" pattern="010-[0-9]{4}-[0-9]{4}" style='width:150' required/><br><span style="line-height:25%"><br></span>
              <input placeholder="사용 목적 입력" id="purpose" type="text" style='width:150' required/><br><span style="line-height:25%"><br></span>
              <input type="checkbox" id='fileReq' checked='checked'/><input id="filedata" type="file" name='file' required/><br><span style="line-height:25%"><br></span>
              <label for='prepay'><input type='radio' id='prepay' name='pay' value="선불" checked required>선불</input></label>&nbsp;
              <label for='afterpay'><input type='radio' id='afterpay' name='pay' value="후불">후불</input></label><br><span style="line-height:25%"><br></span>
              <span id='manualFee'>사용자 구분</span><br><span style="line-height:10%"><br></span>
              <label for='internal'><input type='radio' id='internal' name='ppl' value="교내구성원" required>교내구성원</input></label><br>
              <label for='standard'><input type='radio' id='standard' name='ppl' value="일반인">일반인</input></label><br><span style="line-height:25%"><br></span>
              사용 장비<br><span style="line-height:10%"><br></span>
              <label for='normal'><input type='radio' id='normal' name='machineType' value="normal" required>일반 장비</input></label><br>
              <label for='industrial'><input type='radio' id='industrial' name='machineType' value="industrial">산업용 장비</input></label><br><br>
            </div><div style='width:50; float:left'>&nbsp;</div>
            <div id='machineSelect' style='float:left; text-align:center; display:none'>
              <div id='machineContainer' style='text-align:left; width:auto; margin:auto; display:inline-block'>
                <div id='normalWrapper' style="display: none">
                  <label for='cubicon'><input type='radio' id='cubicon' name='machine' value="큐비콘" required>큐비콘</input></label><br>
                  <label for='sindo'><input type='radio' id='sindo' name='machine' value="신도">신도</input></label><br>
                  <label for='onyx'><input type='radio' id='onyx' name='machine' value="Onyx">Onyx One</input></label><br>
                  <label for='freeform'><input type='radio' id='freeform' name='machine' value="Freeform">Freeform</input></label><br>
                  <label for='zortrax'><input type='radio' id='zortrax' name='machine' value="Zortrax">Zortrax</input></label><br>
                  <label for='laser'><input type='radio' id='laser' name='machine' value="레이저커터">레이저커터</input></label><br>
                  <label for='plotter'><input type='radio' id='plotter' name='machine' value="플로터">플로터</input></label><br>
                  <label for='cutter'><input type='radio' id='cutter' name='machine' value="커팅플로터">커팅플로터</input></label><br>
                  <label for='uv'><input type='radio' id='uv' name='machine' value="UV 프린터">UV 프린터</input></label><br>
                </div>
                <div id='industrialWrapper' style='display:none'>
                  <label for='x7'><input type='radio' id='x7' name='machine' value="X7" required>X7</input></label><br>
                  <label for='objet350'><input type='radio' id='objet350' name='machine' value="Objet350">Objet350</input></label><br>
                  <label for='f370'><input type='radio' id='f370' name='machine' value="F370">F370</input></label><br>
                  <label for='xfab'><input type='radio' id='xfab' name='machine' value="Xfab">Xfab</input></label><br>
                  <label for='3d'><input type='radio' id='3d' name='machine' value="3D 스캐너">3D 스캐너</input></label><br>
                </div><span style="line-height:35%"><br></span>
                <div id='payment'></div><span style="line-height:25%"><br></span>
                <span id='feeInfo' style="display:none">요금 : 0원</span>&nbsp;
                <span id='discountWrap' style="display:none">
                  <label for='discount'><input type='checkbox' id='discount' name='discount' value='discount'/>할인</input></label>
                </span><br><span style="line-height:25%"><br></span>
                <div id='machineDetail'></div>
              </div><br><br>
              <div id='submitWrapper' style="display:none; margin:0 0 0 5; text-align:left"><input type="submit" style='padding: 0.3rem 1.3rem;'/></div>
            </div>
          </form>
        </td>
        <td style="vertical-align:top">
          <div style="margin:25 0 0 25">
            <span id='analytics' style="color:#0366d6">통계 접기 ▲</span>
            <div id='chartWrap' style="text-align:center; vertical-align: middle; position: relative; width: 950">
              <div id='weekly' style="height: 400"></div>
              <div id='MachineUse' style="height: 500"></div>
              <div id='MachineCnt' style='position: absolute; top: 620; left: 322; text-align:center; vertical-align: middle; font-size: 40;'></div>
              <div id='Belonging' style="height: 500"></div>
              <div id='User' style="height: 500"></div>
            </div>
          </div>
        </td>
      </tr>
    </table>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script src='https://www.gstatic.com/charts/loader.js'></script>
    <script src='/ajoumaker/resources/alertify.min.js'></script>
    <script>
      $(function() {
        $('#version').html($('#version').attr('href').substring($('#version').attr('href').indexOf('?') + 1) + ' α');
        clickEventListener();
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(chartLoader());
        setTimeout(interval(), 30000);
      });
      function interval() {
        setTimeout(interval(), 30000);
        chartLoader();
      }
      $("#DATA").submit(function(event) {
        event.preventDefault();
        var staffList = [['강문석', '5582'], ['김현기', '0796'], ['양승창', '0270'], ['오병준', '3691'], ['최은정', '3960'], ['신은영', '7257'], ['배주근', '4910']];
        var file = $('#filedata')[0].files[0];
        if($('#fileReq').prop('checked')) {
          if(!new RegExp(/\.(stl|zip)/ig).test(file.name.substr(file.name.length - 4, 4))) {
            alertify.error('Only .stl or .zip files accepted');
            return;
          }
        }
        alertify.prompt('Verification Required', function(e) {
          var str = $('#alertify-text').val();
          if(e) {
            for (i in staffList) {
              if(staffList[i][1] == str) {
                $('input').attr('disabled', true);
                alertify.log('Transmitting...', "", 0);
                var serializedData = '날짜=' + new Date().format('yyyy. mm. dd TT hh시 MM분') +
                                     '&이름=' + $.trim($('#name').val()) +
                                     '&소속 / 학과=' + $('#belonging').val() +
                                     '&연락처=' + $('#contact').val() +
                                     '&파일명=' + ($('#fileReq').prop('checked') ? file.name : '파일 없음') +
                                     '&사용 목적=' + $('#purpose').val() +
                                     '&사용 장비=' + $('input:radio[name=machine]:checked').val() + machineNumReturn() +
                                     '&사용량=' + machineUse($('input:radio[name=machine]:checked').attr('id')) +
                                     '&구분=' + $('input:radio[name=ppl]:checked').val() +
                                     '&요금=￦' + addComma(feeCalc($('input:radio[name=machine]:checked').attr('id'), $('input:radio[name=ppl]:checked').val(), Number($('input:checkbox[name=discount]:checked').length))) +
                                     '&결제=' + $('input:radio[name=pay]:checked').val() +
                                     '&담당자=' + staffList[i][0];
                console.log(serializedData);
                var dropboxToken = '2Gsi0PEV9cAAAAAAAAAACY5VZ_5YAk9A0360cufNAI0b1277InPbTU0o-wbw9vPc';
                var xhr = new XMLHttpRequest();
                xhr.upload.onprogress = function(evt) {
                  var percentComplete = parseInt(100.0 * evt.loaded / evt.total);
                  $('.alertify-log-show').html('Uploading File... ' + percentComplete + '%');
                  if(isNaN(percentComplete)) {
                    alertify.error('File Not Found');
                    $('input').attr('disabled', false);
                  }
                };
                xhr.onload = function() {
                  if (xhr.status === 200) {
                    var fileInfo = JSON.parse(xhr.response);
                    $('.alertify-log-show').css('display', 'none');
                    alertify.log('Transmitting Data...');
                    request = $.ajax({
                        type: 'POST',
                        url: 'https://script.google.com/macros/s/AKfycbyi2sn97OkkOFIfVt3BVH3ToEPBFvx4G_dQ_oS_jYxqcZNuB_c/exec',
                        data: encodeURI(serializedData)
                    });
                    request.done(function() {
                      alertify.success('Transmitted');
                    });
                    request.fail(function(jqXHR, textStatus, errorThrown) {
                      alertify.error('DataError : ' + textStatus + errorThrown);
                    });
                    request.always(function() {
                      $('input').attr('disabled', false);
                      $('#DATA')[0].reset();
                      $('#machineSelect').css('display', 'none');
                    });
                  }
                  else {
                    var errorMessage = xhr.response || 'Unable to upload file';
                    $('.alertify-log-show').css('display', 'none');
                    alertify.error('UploadError : ' + errorMessage);
                    $('input').attr('disabled', false);
                  }
                };
                if($('#fileReq').prop('checked')) {
                  xhr.open('POST', 'https://content.dropboxapi.com/2/files/upload');
                  xhr.setRequestHeader('Authorization', 'Bearer ' + dropboxToken);
                  xhr.setRequestHeader('Content-Type', 'application/octet-stream');
                  xhr.setRequestHeader('Dropbox-API-Arg', UniEncode({
                    path: '/' + new Date().format('yyyy. mm. dd TT hh시 MM분 ') + $.trim($('#name').val()) + ' - ' + $('#belonging').val().replace(/\//g, '~') + '/' + file.name,
                    mode: 'add',
                    autorename: true
                  }));
                  xhr.send(file);
                }
                else {
                  xhr.open('POST', 'https://api.dropboxapi.com/2/files/create_folder_v2');
                  xhr.setRequestHeader('Authorization', 'Bearer ' + dropboxToken);
                  xhr.setRequestHeader('Content-Type', 'application/json');
                  xhr.send(UniEncode({
                    path: '/' + new Date().format('yyyy. mm. dd TT hh시 MM분 ') + $.trim($('#name').val()) + ' - ' + $('#belonging').val().replace(/\//g, '~'),
                  }));
                }
                return;
              }
            }
          }
          alertify.error('Verification Failure');
        });
        $('#alertify-text').replaceWith('<input type="password" id="alertify-text" class="alertify-text"/>');
        setTimeout(function() {
          $('#alertify-text').focus();
        }, 500);
        $('#alertify-text').focus();
      });
      function feeCalc(machine, type, discount) {
        if(type == '수동 입력'){
          return $('#manualCost').val().replace(/[^\d]+/g, '');
        }
        if(machine == 'cubicon' || machine == 'sindo' || machine == 'zortrax') {
          var hour = Number($('#usehour').val()), min = Number($('#usemin').val());
          if(type == '교내구성원') {
            if(discount) return calc(1500, 6, hour, min);
            else return calc(1500, 0, hour, min);
          }
          else return calc(2000, 0, hour, min);
        }
        else if(machine == 'onyx') {
          var hour = Number($('#usehour').val()), min = Number($('#usemin').val());
          if(type == '교내구성원') {
            if(discount) return calc(2000, 2, hour, min);
            else return calc(2000, 0, hour, min);
          }
          else return calc(4000, 0, hour, min);
        }
        else if(machine == 'freeform') {
          var hour = Number($('#usehour').val()), min = Number($('#usemin').val());
          if(type == '교내구성원') {
            if(discount) return calc(4000, 1, hour, min);
            else return calc(4000, 0, hour, min);
          }
          else return calc(6000, 0, hour, min);
        }
        else if(machine == 'laser') {
          var hour = Number($('#usehour').val()), min = Number($('#usemin').val());
          if(type == '교내구성원') return calc(1500, 0, hour, min);
          else return calc(2500, 0, hour, min);
        }
        else if(machine == 'plotter') {
          var area = $('#xaxis').val() * $('#yaxis').val();
          fee = area / 100;
          if(type == '교내구성원') return Math.round(fee / 200) * 100;
          else return Math.round(fee / 100) * 100;
        }
        else if(machine == 'cutter') {
          var hour = Number($('#usehour').val()), min = Number($('#usemin').val());
          if(type == '교내구성원') return calc(1500, 0, hour, min);
          else return calc(2500, 0, hour, min);
        }
        else if(machine == 'uv') {
          var area = $('#xaxis').val() * $('#yaxis').val();
          fee = area / 10;
          if(type == '교내구성원') return Math.round(fee / 200) * 100;
          else return Math.round(fee / 100) * 100;
        }
        else if(machine == 'x7') {
          var hour = Number($('#usehour').val()), min = Number($('#usemin').val());
          if(type == '교내구성원') return calc(3500, 0, hour, min) + Number($('#mainMaterial').val()) * 5000;
          else return calc(6500, 0, hour, min) + Number($('#mainMaterial').val()) * 9000;
        }
        else if(machine == 'objet350') {
          if(type == '교내구성원') return Math.round(($('#mainMaterial').val() * 400 + $('#subMaterial').val() * 150) / 100) * 100;
          else return Math.round(($('#mainMaterial').val() * 700 + $('#subMaterial').val() * 250) / 100) * 100;
        }
        else if(machine == 'f370') {
          var hour = Number($('#usehour').val()), min = Number($('#usemin').val());
          if(type == '교내구성원') return calc(14000, 0, hour, min);
          else return calc(20000, 0, hour, min);
        }
        else if(machine == 'xfab') {
          if(type == '교내구성원') return $('#mainMaterial').val() * 400;
          else return $('#mainMaterial').val() * 600;
        }
        else if(machine == '3d') {
          var hour = Number($('#usehour').val()), min = Number($('#usemin').val());
          if(type == '교내구성원') return calc(6000, 0, hour, min);
          else return calc(12000, 0, hour, min);
        }
      }
      function calc(fee, sub, hour, min) {
        var price = Number(fee) * (hour - Number(sub) + (min / 60));
        return price <= 0 ? 0 : price < Number(fee) ? Number(fee) : Math.round(price / 100) * 100;
      }
      function machineUse(machine) {
        if(machine == 'cubicon' || machine == 'sindo' || machine == 'onyx' || machine == 'freeform' || machine == 'zortrax' || machine == 'laser' || machine == 'cutter' || machine == 'f370' || machine == '3d') {
          return Number($('#usehour').val()) + '시간 ' + Number($('#usemin').val()) + '분';
        }
        else if(machine == 'plotter' || machine == 'uv') {
          return Number($('#xaxis').val()) + 'mm * ' + Number($('#yaxis').val()) + 'mm';
        }
        else if(machine == 'x7') {
          return Number($('#usehour').val()) + '시간 ' + Number($('#usemin').val()) + '분 / 카본 : ' + Number($('#mainMaterial').val()) + 'cc';
        }
        else if(machine == 'objet350') {
          return '메인 : ' + Number($('#mainMaterial').val()) + 'g / 서브 : ' + Number($('#subMaterial').val()) + 'g';
        }
        else if(machine == 'xfab') {
          return '메인 : ' +  Number($('#mainMaterial').val()) + 'g';
        }
      }
      function machineNumReturn() {
        if($('#plotter:checked, #cutter:checked, #uv:checked, #x7:checked, #objet350:checked, #f370:checked, #xfab:checked, #zortrax:checked').length == 0) {
          return ' ' + $('input:radio[name=machineNum]:checked').val().substr(1, 1) + '번';
        }
        else return '';
      }
      function clickReset() {
        $('#feeInfo').css('display', 'inline');
        $('#machineDetail').html('');
        $('#payment').html('');
        $('#feeInfo').html('요금 : 0원');
        $('#discountWrap').css('display', 'none');
      }
      function keyupReset() {
        $('#submitWrapper').css('display', 'block');
        $('#usehour').keyup(function(event) {
          event = event || window.event;
          this.value = autoLimit(this.value.trim(), 3);
        });
        $('#usemin').keyup(function(event) {
          event = event || window.event;
          this.value = autoLimit(this.value.trim(), 2);
        });
        $('input[name=cost]').keyup(function() {
          if(!$('#manualActivate').attr('checked')) {
            $('#feeInfo').html('요금 : ' + addComma(feeCalc($('input:radio[name=machine]:checked').attr('id'), $('input:radio[name=ppl]:checked').val(), Number($('input:checkbox[name=discount]:checked').length))) + '원');
          }
        });
        $('#discountWrap').click(function() {
          $('#feeInfo').html('요금 : ' + addComma(feeCalc($('input:radio[name=machine]:checked').attr('id'), $('input:radio[name=ppl]:checked').val(), Number($('input:checkbox[name=discount]:checked').length))) + '원');
        });
      }
      function autoLimit(str, num) {
        if(str.length > num) { return str.substr(0, num); }
        return str;
      }
      function addComma(x) { return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); }
      function isNum(s) {
        s += '';
        if (s == '' || isNaN(s)) return false;
        return true;
      }
      function UniEncode(str) {
        return JSON.stringify(str).replace(/[\u007f-\uffff]/g,
          function(c) { return '\\u' + ('000' + c.charCodeAt(0).toString(16)).slice(-4); });
      }
      function chartLoader() {
        var machineList = [['큐비콘', 0], ['신도', 0], ['Onyx', 0], ['Freeform', 0], ['Zortrax', 0], ['레이저커터', 0], ['플로터', 0],
                           ['커팅플로터', 0], ['UV 프린터', 0], ['X7', 0], ['Objet350', 0], ['F370', 0], ['Xfab', 0], ['3D 스캐너', 0]];
        var data = [], dept = [], user = [], dpt = [], usr = [], date = [], dt = [], str = '', total = 0;
        $.ajax({
          url: 'https://docs.google.com/spreadsheet/pub?key=1vMeYMA-GLuTP_o0pUCwe9oUxSEoXZIXseeiYiiARObg&single=true&gid=0&sheet=장비사용&range=A2:J&output=csv',
          type: "GET",
          dataType: 'text',
          cache: false,
          success: function (response) {
            data = response.split('\n').map((line) => line.split(','));
            for (var i in data) {
              var pos = data[i][6].indexOf(' ');
              data[i][6] = pos != -1 ? data[i][6].substr(0, pos) : data[i][6];
              dept[data[i][2].includes('학과') ? data[i][2] : '기타'] = dept[data[i][2].includes('학과') ? data[i][2] : '기타'] ? dept[data[i][2].includes('학과') ? data[i][2] : '기타'] + 1 : 1;
              user[data[i][8]] = user[data[i][8]] ? user[data[i][8]] + 1 : 1;
              date[data[i][0].substr(0, 12)] = date[data[i][0].substr(0, 12)] ? date[data[i][0].substr(0, 12)] + 1 : 1;
              for (var j in machineList) if(data[i].includes(machineList[j][0])) machineList[j][1] += 1;
            }
            for (var i in machineList) {
              str += '<option value=' + machineList[i][0] + '>' + machineList[i][0] + '</option>';
              total += machineList[i][1];
            }
            $('#machine').html(str);
            dpt = Object.keys(dept);
            for (var i in dpt) dpt[i] = [dpt[i], Object.values(dept)[i]];
            usr = Object.keys(user);
            for (var i in usr) usr[i] = [usr[i], Object.values(user)[i]];
            dt = Object.keys(date);
            for (var i in dt) dt[i] = [dt[i], Object.values(date)[i]];
            Charts(machineList, total, dpt, usr, dt);
            console.log('Chart updated : ' + new Date());
          }
        });
      }
      function Charts(machineList, total, dpt, usr, dt) {
        var data, options;
        machineList.sort(function(a, b) { return parseInt(a[1]) > parseInt(b[1]) ? -1 : (parseInt(a[1]) < parseInt(b[1]) ? 1 : 0); });
        dpt.sort(function(a, b) { return parseInt(a[1]) > parseInt(b[1]) ? -1 : (parseInt(a[1]) < parseInt(b[1]) ? 1 : 0); });
        usr.sort(function(a, b) { return parseInt(a[1]) > parseInt(b[1]) ? -1 : (parseInt(a[1]) < parseInt(b[1]) ? 1 : 0); });

        options = {
          title: '오늘 현재까지 ' + dt[dt.length - 1][1] + ' 명 방문\n하루 평균 ' + (total / dt.length).toFixed(1) + ' 명 방문\n\n주간 사용자 수 현황',
          legend: 'none'
        };
        dt.splice(0, dt.length - 8);
        dt.pop();
        dt.unshift(['날짜', '사용자 수']);
        machineList.unshift(['장비', '사용횟수']);
        dpt.unshift(['학과', '방문횟수']);
        usr.unshift(['유형', '방문횟수']);

        data = google.visualization.arrayToDataTable(dt);
        new google.visualization.BarChart(document.getElementById('weekly')).draw(data, options);

        data = google.visualization.arrayToDataTable(machineList);
        options = {
          title: '장비별 사용 현황',
          pieHole: 0.4
        };
        var chart = new google.visualization.PieChart(document.getElementById('MachineUse'));
        $('#MachineCnt').text(total);
        chart.draw(data, options);

        data = google.visualization.arrayToDataTable(dpt);
        options = {
          title: '소속별 사용 현황',
          pieHole: 0.4
        };
        new google.visualization.PieChart(document.getElementById('Belonging')).draw(data, options);

        data = google.visualization.arrayToDataTable(usr);
        options = {
          title: '사용자별 현황',
          pieHole: 0.4
        };
        new google.visualization.PieChart(document.getElementById('User')).draw(data, options);
      }
      function clickEventListener() {
        $('#analytics').click(function() {
          if($('#analytics').html() == '통계 보기 ▼') {
            $('#chartWrap').css('display', 'block');
            $('#analytics').html('통계 접기 ▲');
          }
          else {
            $('#chartWrap').css('display', 'none');
            $('#analytics').html('통계 보기 ▼');
          }
        });
        $('#manualFee').click(function() {
          $('input:checkbox[name=discount]').attr('checked', false);
          $('#discountWrap').css('display', 'none');
          $('#feeInfo').html('<input type="radio" id="manualActivate" name="ppl" value="수동 입력" checked>수동 입력 활성화</input><br>요금 : <input type="text" id="manualCost" style="width:70"/>원');
          $('#manualCost').keyup(function(event) {
            event = event || window.event;
            this.value = addComma(this.value.replace(/[^\d]+/g, ''));
          });
        });
        $('input:radio[name=ppl]').click(function() {
          $('#feeInfo').html('요금 : ' + addComma(feeCalc($('input:radio[name=machine]:checked').attr('id'), $('input:checkbox[name=discount]:checked').length ? $('input:checkbox[name=discount]:checked').length : $('input:radio[name=ppl]:checked').val())) + '원');
          if($('input:radio[name=ppl]:checked').val() == '교내구성원') {
            machine = $('input:radio[name=machine]:checked').attr('id');
            if(machine == 'cubicon' || machine == 'sindo' || machine == 'onyx' || machine == 'freeform' || machine == 'zortrax') {
              $('#discountWrap').css('display', 'inline');
            }
          }
          else $('#discountWrap').css('display', 'none');
        });
        $('#normal').click(function() {
          $('#machineDetail').html('');
          $('#payment').html('');
          $('#machineSelect').css('display', 'block');
          $('#normalWrapper').css('display', 'block');
          $('#industrialWrapper').css('display', 'none');
          $('#feeInfo').html('');
          $('#discountWrap').css('display', 'none');
          $('#submitWrapper').css('display', 'none');
          $('input:radio[name=machine]:checked').prop('checked', false);
        });
        $('#industrial').click(function() {
          $('#machineDetail').html('');
          $('#payment').html('');
          $('#machineSelect').css('display', 'block');
          $('#normalWrapper').css('display', 'none');
          $('#industrialWrapper').css('display', 'block');
          $('#feeInfo').html('');
          $('#discountWrap').css('display', 'none');
          $('#submitWrapper').css('display', 'none');
          $('input:radio[name=machine]:checked').prop('checked', false);
        });
        payment_time_str = '사용 시간 : <input placeholder="시간" id="usehour" name="cost" type="number" required style="width:40" min="0"/> : <input placeholder="분" id="usemin" name="cost" type="number" required style="width:30" min="0" max="59"/><br>';
        payment_area_str = '인쇄 면적 : <input placeholder="mm" id="xaxis" name="cost" type="number" required style="width:40"/> * <input placeholder="mm" id="yaxis" name="cost" type="number" required style="width:40"/><br>';
        $('#cubicon').click(function() {
          clickReset();
          if($('input:radio[name=ppl]:checked').val() == '교내구성원') {
            $('#discountWrap').css('display', 'inline');
          }
          cubicon_str = "장비 번호<br><span style='line-height:10%'><br></span>" +
          "<label for='C1'><input type='radio' id='C1' name='machineNum' value='C1' required>1</input></label>&nbsp;&nbsp;" +
          "<label for='C2'><input type='radio' id='C2' name='machineNum' value='C2'>2</input></label><br>" +
          "<label for='C3'><input type='radio' id='C3' name='machineNum' value='C3'>3</input></label>&nbsp;&nbsp;" +
          "<label for='C4'><input type='radio' id='C4' name='machineNum' value='C4'>4</input></label><br>" +
          "<label for='C5'><input type='radio' id='C5' name='machineNum' value='C5'>5</input></label>&nbsp;&nbsp;" +
          "<label for='C6'><input type='radio' id='C6' name='machineNum' value='C6'>6</input></label><br>" +
          "<label for='C7'><input type='radio' id='C7' name='machineNum' value='C7'>7</input></label>&nbsp;&nbsp;" +
          "<label for='C8'><input type='radio' id='C8' name='machineNum' value='C8'>8</input></label><br>";
          $('#payment').html(payment_time_str);
          $('#machineDetail').html(cubicon_str);
          keyupReset();
        });
        $('#sindo').click(function() {
          clickReset();
          if($('input:radio[name=ppl]:checked').val() == '교내구성원') {
            $('#discountWrap').css('display', 'inline');
          }
          sindo_str = "장비 번호<br><span style='line-height:10%'><br></span>" +
          "<label for='S1'><input type='radio' id='S1' name='machineNum' value='S1' required>1</input></label>&nbsp;&nbsp;" +
          "<label for='S2'><input type='radio' id='S2' name='machineNum' value='S2'>2</input></label><br>" +
          "<label for='S3'><input type='radio' id='S3' name='machineNum' value='S3'>3</input></label>&nbsp;&nbsp;" +
          "<label for='S4'><input type='radio' id='S4' name='machineNum' value='S4'>4</input></label><br>" +
          "<label for='S5'><input type='radio' id='S5' name='machineNum' value='S5'>5</input></label><br>";
          $('#payment').html(payment_time_str);
          $('#machineDetail').html(sindo_str);
          keyupReset();
        });
        $('#onyx').click(function() {
          clickReset();
          if($('input:radio[name=ppl]:checked').val() == '교내구성원') {
            $('#discountWrap').css('display', 'inline');
          }
          onyx_str = "장비 번호<br><span style='line-height:10%'><br></span>" +
          "<label for='O1'><input type='radio' id='O1' name='machineNum' value='O1' required>1</input></label>&nbsp;&nbsp;" +
          "<label for='O2'><input type='radio' id='O2' name='machineNum' value='O2'>2</input></label><br>" +
          "<label for='O3'><input type='radio' id='O3' name='machineNum' value='O3'>3</input></label>&nbsp;&nbsp;" +
          "<label for='O4'><input type='radio' id='O4' name='machineNum' value='O4'>4</input></label><br>" +
          "<label for='O5'><input type='radio' id='O5' name='machineNum' value='O5'>5</input></label><br>";
          $('#payment').html(payment_time_str);
          $('#machineDetail').html(onyx_str);
          keyupReset();
        });
        $('#freeform').click(function() {
          clickReset();
          if($('input:radio[name=ppl]:checked').val() == '교내구성원') {
            $('#discountWrap').css('display', 'inline');
          }
          freeform_str = "장비 번호<br><span style='line-height:10%'><br></span>" +
          "<label for='F1'><input type='radio' id='F1' name='machineNum' value='F1' required>1</input></label>&nbsp;&nbsp;" +
          "<label for='F2'><input type='radio' id='F2' name='machineNum' value='F2'>2</input></label><br>";
          $('#payment').html(payment_time_str);
          $('#machineDetail').html(freeform_str);
          keyupReset();
        });
        $('#zortrax').click(function() {
          clickReset();
          if($('input:radio[name=ppl]:checked').val() == '교내구성원') {
            $('#discountWrap').css('display', 'inline');
          }
          $('#payment').html(payment_time_str);
          keyupReset();
        });
        $('#laser').click(function() {
          clickReset();
          laser_str = "장비 번호<br><span style='line-height:10%'><br></span>" +
          "<label for='L1'><input type='radio' id='L1' name='machineNum' value='L1' required>1</input></label>&nbsp;&nbsp;" +
          "<label for='L2'><input type='radio' id='L2' name='machineNum' value='L2'>2</input></label><br>";
          $('#payment').html(payment_time_str);
          $('#machineDetail').html(laser_str);
          keyupReset();
        });
        $('#plotter').click(function() {
          clickReset();
          $('#payment').html(payment_area_str);
          keyupReset();
        });
        $('#cutter').click(function() {
          clickReset();
          $('#payment').html(payment_time_str);
          keyupReset();
        });
        $('#uv').click(function() {
          clickReset();
          $('#payment').html(payment_area_str);
          keyupReset();
        });
        $('#x7').click(function() {
          clickReset();
          $('#payment').html(payment_time_str + '강화 재료 : <input placeholder="카본(cc)" id="mainMaterial" name="cost" type="number" required style="width:60"/>');
          keyupReset();
        });
        $('#objet350').click(function() {
          clickReset();
          payment_str = '사용 재료<br><input placeholder="메인(g)" id="mainMaterial" name="cost" type="number" required style="width:60"/>, <input placeholder="보조(g)" id="subMaterial" name="cost" type="number" required style="width:60"/><br>';
          $('#payment').html(payment_str);
          keyupReset();
        });
        $('#f370').click(function() {
          clickReset();
          $('#payment').html(payment_time_str);
          keyupReset();
        });
        $('#xfab').click(function() {
          clickReset();
          payment_str = '사용 재료 : <input placeholder="메인(g)" id="mainMaterial" name="cost" type="number" required style="width:60"/>';
          $('#payment').html(payment_str);
          keyupReset();
        });
        $('#3d').click(function() {
          clickReset();
          $('#payment').html(payment_time_str);
          keyupReset();
        });
        $('#fileReq').click(function() { $('#filedata').attr('required', $('#fileReq').prop('checked') ? true : false); });
        $('#contact').keyup(function(event) {
          event = event || window.event;
          this.value = autoHypen(this.value.trim());
          function autoHypen(str) {
            str = str.replace(/[^0-9]/g, '');
            if( str.length < 4) { return str; }
            else if(str.length < 8) { return str.substr(0, 3) + '-' + str.substr(3); }
            else { return str.substr(0, 3) + '-' + str.substr(3, 4) + '-' + str.substr(7); }
            return str;
          }
        });
      }
      var dateFormat = function () {
        var	token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
            pad = function (val, len) {
              val = String(val);
              len = len || 2;
              while (val.length < len) val = "0" + val;
              return val;
            };
        return function (date, mask, utc) {
          var dF = dateFormat;
          if (arguments.length == 1 && Object.prototype.toString.call(date) == "[object String]" && !/\d/.test(date)) {
            mask = date;
            date = undefined;
          }
          date = date ? new Date(date) : new Date;
          var	_ = utc ? "getUTC" : "get",
            d = date[_ + "Date"](),
            m = date[_ + "Month"](),
            y = date[_ + "FullYear"](),
            H = date[_ + "Hours"](),
            M = date[_ + "Minutes"](),
            flags = {
              dd:   pad(d),
              mm:   pad(m + 1),
              yy:   String(y).slice(2),
              yyyy: y,
              hh:   pad(H % 12 || 12),
              HH:   pad(H),
              MM:   pad(M),
              TT:   H < 12 ? "오전" : "오후"
            };
          return mask.replace(token, function ($0) {
            return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);
          });
        };
      }();
      Date.prototype.format = function (mask, utc) { return dateFormat(this, mask, utc); };
    </script>
    <script type="text/javascript" src="//wcs.naver.net/wcslog.js"></script>
    <script type="text/javascript">
      if(!wcs_add) var wcs_add = {};
      wcs_add["wa"] = "125568d2258e0e";
      wcs_do();
    </script>
  </body>
</html>
